<link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
<script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
<style>

        .run-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: transform 0.2s;
        }

        .run-btn:hover {
            transform: scale(1.05);
        }

        .run-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .output-area {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            display: none;
        }

        .output-area.visible {
            display: block;
        }

        .loading {
            color: #667eea;
            font-style: italic;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #2d3748;
            color: white;
            border: 1px solid #4a5568;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            z-index: 10;
        }

        .copy-btn:hover {
            background: #4a5568;
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        pre {
            position: relative;
        }

        /* Slide styles */
        #slide-container {
            position: relative;
            min-height: 600px;
        }

        .slide {
            display: none;
        }

        .slide.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }



        /* Tab Styles */
        .tabs {
            display: flex;
            margin-bottom: 0;
            background: #2d3748;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
        }

        .tab-btn {
            background: transparent;
            border: none;
            color: #a0aec0;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            border-bottom: 2px solid transparent;
        }

        .tab-btn:hover {
            color: white;
            background: #4a5568;
        }

        .tab-btn.active {
            color: white;
            background: #4a5568;
            border-bottom: 2px solid #667eea;
        }

        .tab-content {
            display: none;
            background: #2d2d2d;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
            min-height: 200px;
        }

        .tab-content.active {
            display: block;
        }

        /* Adjust pre styling for tabs */
        .tab-content pre {
            margin: 0;
            border-radius: 0 0 8px 8px;
            border: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .json-area {
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            padding: 15px;
            white-space: pre !important;
            overflow-x: auto;
        }

        /* Update output area for tab context */
        .output-area {
            margin-top: 0;
            /* Remove margin as it's inside tab now */
            background: #1e1e1e;
            color: #d4d4d4;
            /* Light text for dark background */
            /* Match tab background */
            min-height: 200px;
            /* Ensure some height even if empty */
            padding: 15px;
        }
    
</style>


    

    <div class="container">
        <div id="slide-container">
            <div class="slide active">
                <section style="text-align: center;">
                    <h2>Interactive Code Examples</h2>
                    <p>11 Recipes for Success with the BTAA Geoportal API</p>
                    <p>Download the full runnable Python script containing all these examples, or run them directly in
                        your browser below!</p>
                    <a href="btaa_api_examples.py" class="btn" download>Download Python Script</a>
                    <p style="margin-top: 30px; color: #718096;">Use the navigation buttons below or arrow keys to move
                        between examples.</p>
                </section>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>1. Simple Search</h3>
                        <span class="badge">Search</span>
                    </div>
                    <p><strong>Goal:</strong> Find all resources related to "water".</p>
                    <p><strong>Request:</strong> <code>GET /api/v1/search?q=water</code></p>

                    <div class="tabs">
                        <button id="btn-tab-python-1" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-1')">Python</button>
                        <button id="btn-tab-response-1" class="tab-btn" onclick="openTab(event, 'tab-response-1')">API
                            Response</button>
                        <button id="btn-tab-output-1" class="tab-btn"
                            onclick="openTab(event, 'tab-output-1')">Output</button>
                    </div>

                    <div id="tab-python-1" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-1')">üìã Copy</button>
                        <pre><code id="code-1" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 1: Text search for 'water'
params = {
    'q': 'water',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total number of resources found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-1" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-1')">üìã Copy</button>
                        <pre><code id="json-1" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-1" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-1')">üìã Copy</button>
                        <div class="output-area" id="output-1">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-1">‚ñ∂ Run Example 1</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>2. Obtain a Resource</h3>
                        <span class="badge">Resource</span>
                    </div>
                    <p><strong>Goal:</strong> Fetch metadata for a specific resource ID.</p>
                    <p><strong>Request:</strong> <code>GET /api/v1/resources/ark28722-s7vs38</code></p>

                    <div class="tabs">
                        <button id="btn-tab-python-2" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-2')">Python</button>
                        <button id="btn-tab-response-2" class="tab-btn" onclick="openTab(event, 'tab-response-2')">API
                            Response</button>
                        <button id="btn-tab-output-2" class="tab-btn"
                            onclick="openTab(event, 'tab-output-2')">Output</button>
                    </div>

                    <div id="tab-python-2" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-2')">üìã Copy</button>
                        <pre><code id="code-2" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 2: Fetch a specific resource
resource_id = "ark28722-s7vs38"
response = requests.get(f"{BASE_URL}/resources/{resource_id}")
data = response.json()

attrs = data['data']['attributes']
print(f"Title: {attrs.get('dct_title_s', 'N/A')}")
print(f"Description: {attrs.get('dct_description_sm', ['N/A'])[0]}")

# Show references
if 'dct_references_s' in attrs:
    refs = json.loads(attrs['dct_references_s'])
    for key, value in refs.items():
        print(f"{key}: {value}")</code></pre>
                    </div>

                    <div id="tab-response-2" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-2')">üìã Copy</button>
                        <pre><code id="json-2" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-2" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-2')">üìã Copy</button>
                        <div class="output-area" id="output-2">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-2">‚ñ∂ Run Example 2</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>3. Boolean Search</h3>
                        <span class="badge">Advanced Search</span>
                    </div>
                    <p><strong>Goal:</strong> Search for "(water AND ice) NOT Forest".</p>
                    <p><strong>Request:</strong> <code>GET /api/v1/search?q=(water AND ice) NOT Forest</code></p>

                    <div class="tabs">
                        <button id="btn-tab-python-3" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-3')">Python</button>
                        <button id="btn-tab-response-3" class="tab-btn" onclick="openTab(event, 'tab-response-3')">API
                            Response</button>
                        <button id="btn-tab-output-3" class="tab-btn"
                            onclick="openTab(event, 'tab-output-3')">Output</button>
                    </div>

                    <div id="tab-python-3" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-3')">üìã Copy</button>
                        <pre><code id="code-3" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 3: Boolean search
params = {
    'q': '(water AND ice) NOT Forest',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total number of resources found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-3" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-3')">üìã Copy</button>
                        <pre><code id="json-3" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-3" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-3')">üìã Copy</button>
                        <div class="output-area" id="output-3">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-3">‚ñ∂ Run Example 3</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>4. Field-Directed Search</h3>
                        <span class="badge">Advanced Search</span>
                    </div>
                    <p><strong>Goal:</strong> Search for "Transportation" specifically in the Subject field.</p>
                    <p><strong>Request:</strong>
                        <code>GET /api/v1/search?q=Transportation&search_field=dct_subject_sm</code>
                    </p>

                    <div class="tabs">
                        <button id="btn-tab-python-4" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-4')">Python</button>
                        <button id="btn-tab-response-4" class="tab-btn" onclick="openTab(event, 'tab-response-4')">API
                            Response</button>
                        <button id="btn-tab-output-4" class="tab-btn"
                            onclick="openTab(event, 'tab-output-4')">Output</button>
                    </div>

                    <div id="tab-python-4" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-4')">üìã Copy</button>
                        <pre><code id="code-4" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 4: Field-directed search
params = {
    'q': 'Transportation',
    'search_field': 'dct_subject_sm',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total number of resources found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-4" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-4')">üìã Copy</button>
                        <pre><code id="json-4" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-4" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-4')">üìã Copy</button>
                        <div class="output-area" id="output-4">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-4">‚ñ∂ Run Example 4</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>5. Faceted Search</h3>
                        <span class="badge">Facets</span>
                    </div>
                    <p><strong>Goal:</strong> Search for "seattle" and filter for "Maps".</p>
                    <p><strong>Request:</strong>
                        <code>GET /api/v1/search?q=seattle&include_filters[gbl_resourceClass_sm][]=Maps</code>
                    </p>

                    <div class="tabs">
                        <button id="btn-tab-python-5" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-5')">Python</button>
                        <button id="btn-tab-response-5" class="tab-btn" onclick="openTab(event, 'tab-response-5')">API
                            Response</button>
                        <button id="btn-tab-output-5" class="tab-btn"
                            onclick="openTab(event, 'tab-output-5')">Output</button>
                    </div>

                    <div id="tab-python-5" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-5')">üìã Copy</button>
                        <pre><code id="code-5" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 5: Faceted search (Maps only)
params = {
    'q': 'seattle',
    'include_filters[gbl_resourceClass_sm][]': 'Maps',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Maps Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-5" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-5')">üìã Copy</button>
                        <pre><code id="json-5" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-5" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-5')">üìã Copy</button>
                        <div class="output-area" id="output-5">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-5">‚ñ∂ Run Example 5</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>6. Faceted Search (Includes)</h3>
                        <span class="badge">Facets</span>
                    </div>
                    <p><strong>Goal:</strong> Search for "seattle", filter for "Maps" AND "Washington".</p>
                    <p><strong>Request:</strong> <code>GET /api/v1/search?q=seattle&include_filters...</code></p>

                    <div class="tabs">
                        <button id="btn-tab-python-6" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-6')">Python</button>
                        <button id="btn-tab-response-6" class="tab-btn" onclick="openTab(event, 'tab-response-6')">API
                            Response</button>
                        <button id="btn-tab-output-6" class="tab-btn"
                            onclick="openTab(event, 'tab-output-6')">Output</button>
                    </div>

                    <div id="tab-python-6" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-6')">üìã Copy</button>
                        <pre><code id="code-6" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 6: Faceted search (Maps + Washington)
params = {
    'q': 'seattle',
    'include_filters[gbl_resourceClass_sm][]': 'Maps',
    'include_filters[dct_spatial_sm][]': 'Washington',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-6" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-6')">üìã Copy</button>
                        <pre><code id="json-6" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-6" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-6')">üìã Copy</button>
                        <div class="output-area" id="output-6">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-6">‚ñ∂ Run Example 6</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>7. Faceted Search (Excludes)</h3>
                        <span class="badge">Facets</span>
                    </div>
                    <p><strong>Goal:</strong> Search for "seattle", filter for "Maps", "Washington", but EXCLUDE
                        "Pennsylvania State
                        University".</p>
                    <p><strong>Request:</strong> <code>GET /api/v1/search?q=seattle&exclude_filters...</code></p>

                    <div class="tabs">
                        <button id="btn-tab-python-7" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-7')">Python</button>
                        <button id="btn-tab-response-7" class="tab-btn" onclick="openTab(event, 'tab-response-7')">API
                            Response</button>
                        <button id="btn-tab-output-7" class="tab-btn"
                            onclick="openTab(event, 'tab-output-7')">Output</button>
                    </div>

                    <div id="tab-python-7" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-7')">üìã Copy</button>
                        <pre><code id="code-7" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 7: Faceted search (Maps + Washington - PSU)
params = {
    'q': 'seattle',
    'include_filters[gbl_resourceClass_sm][]': 'Maps',
    'include_filters[dct_spatial_sm][]': 'Washington',
    'exclude_filters[schema_provider_s][]': 'Pennsylvania State University',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-7" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-7')">üìã Copy</button>
                        <pre><code id="json-7" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-7" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-7')">üìã Copy</button>
                        <div class="output-area" id="output-7">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-7">‚ñ∂ Run Example 7</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>8. Spatial Search (BBox)</h3>
                        <span class="badge">Spatial</span>
                    </div>
                    <p><strong>Goal:</strong> Find maps within the Minnesota bounding box.</p>
                    <p><strong>Request:</strong>
                        <code>GET /api/v1/search?q=maps&include_filters[geo][type]=bbox...</code>
                    </p>

                    <div class="tabs">
                        <button id="btn-tab-python-8" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-8')">Python</button>
                        <button id="btn-tab-response-8" class="tab-btn" onclick="openTab(event, 'tab-response-8')">API
                            Response</button>
                        <button id="btn-tab-output-8" class="tab-btn"
                            onclick="openTab(event, 'tab-output-8')">Output</button>
                    </div>

                    <div id="tab-python-8" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-8')">üìã Copy</button>
                        <pre><code id="code-8" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 8: Bounding Box Search (Minnesota)
params = {
    'q': 'maps',
    'include_filters[geo][type]': 'bbox',
    'include_filters[geo][field]': 'dcat_bbox',
    'include_filters[geo][top_left][lat]': '49.0',
    'include_filters[geo][top_left][lon]': '-97.2',
    'include_filters[geo][bottom_right][lat]': '43.5',
    'include_filters[geo][bottom_right][lon]': '-89.5',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-8" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-8')">üìã Copy</button>
                        <pre><code id="json-8" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-8" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-8')">üìã Copy</button>
                        <div class="output-area" id="output-8">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-8">‚ñ∂ Run Example 8</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>9. Spatial Search (Distance)</h3>
                        <span class="badge">Spatial</span>
                    </div>
                    <p><strong>Goal:</strong> Find "parks" resources within 50km of Minneapolis.</p>
                    <p><strong>Request:</strong>
                        <code>GET /api/v1/search?q=parks&include_filters[geo][type]=distance...</code>
                    </p>

                    <div class="tabs">
                        <button id="btn-tab-python-9" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-9')">Python</button>
                        <button id="btn-tab-response-9" class="tab-btn" onclick="openTab(event, 'tab-response-9')">API
                            Response</button>
                        <button id="btn-tab-output-9" class="tab-btn"
                            onclick="openTab(event, 'tab-output-9')">Output</button>
                    </div>

                    <div id="tab-python-9" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-9')">üìã Copy</button>
                        <pre><code id="code-9" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 9: Distance Search (50km from Minneapolis)
params = {
    'q': 'parks',
    'include_filters[geo][type]': 'distance',
    'include_filters[geo][field]': 'dcat_centroid',
    'include_filters[geo][center][lat]': '44.9778',
    'include_filters[geo][center][lon]': '-93.2650',
    'include_filters[geo][distance]': '50km',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-9" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-9')">üìã Copy</button>
                        <pre><code id="json-9" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-9" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-9')">üìã Copy</button>
                        <div class="output-area" id="output-9">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-9">‚ñ∂ Run Example 9</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>10. Spatial Search (Polygon)</h3>
                        <span class="badge">Spatial</span>
                    </div>
                    <p><strong>Goal:</strong> Find "water" resources intersecting with Colorado state boundaries.</p>
                    <p><strong>Request:</strong>
                        <code>GET /api/v1/search?q=water&include_filters[geo][type]=polygon...</code>
                    </p>

                    <div class="tabs">
                        <button id="btn-tab-python-10" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-10')">Python</button>
                        <button id="btn-tab-response-10" class="tab-btn" onclick="openTab(event, 'tab-response-10')">API
                            Response</button>
                        <button id="btn-tab-output-10" class="tab-btn"
                            onclick="openTab(event, 'tab-output-10')">Output</button>
                    </div>

                    <div id="tab-python-10" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-10')">üìã Copy</button>
                        <pre><code id="code-10" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 10: Polygon Search (Colorado)
params = {
    'q': 'water',
    'include_filters[geo][type]': 'polygon',
    'include_filters[geo][field]': 'locn_geometry',
    'include_filters[geo][relation]': 'intersects',
    'include_filters[geo][points][0][lat]': '41.0',
    'include_filters[geo][points][0][lon]': '-109.0',
    'include_filters[geo][points][1][lat]': '41.0',
    'include_filters[geo][points][1][lon]': '-102.0',
    'include_filters[geo][points][2][lat]': '37.0',
    'include_filters[geo][points][2][lon]': '-102.0',
    'include_filters[geo][points][3][lat]': '37.0',
    'include_filters[geo][points][3][lon]': '-109.0',
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-10" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-10')">üìã Copy</button>
                        <pre><code id="json-10" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-10" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-10')">üìã Copy</button>
                        <div class="output-area" id="output-10">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-10">‚ñ∂ Run Example 10</button>
                </div>
            </div>
            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>11. Advanced Search (adv_q)</h3>
                        <span class="badge">Advanced</span>
                    </div>
                    <p><strong>Goal:</strong> Find "Maps" having "Island" in title but NOT "Antarctica".</p>
                    <p><strong>Request:</strong> <code>GET /api/v1/search?q=&adv_q=...</code></p>

                    <div class="tabs">
                        <button id="btn-tab-python-11" class="tab-btn active"
                            onclick="openTab(event, 'tab-python-11')">Python</button>
                        <button id="btn-tab-response-11" class="tab-btn" onclick="openTab(event, 'tab-response-11')">API
                            Response</button>
                        <button id="btn-tab-output-11" class="tab-btn"
                            onclick="openTab(event, 'tab-output-11')">Output</button>
                    </div>

                    <div id="tab-python-11" class="tab-content active" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('code-11')">üìã Copy</button>
                        <pre><code id="code-11" class="language-python">import requests
import json

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

# Step 11: Advanced Search with adv_q
# Logic: (ResourceClass=Maps AND Title=Island) NOT Title=Antarctica
adv_query = [
    {"op": "AND", "f": "gbl_resourceClass_sm", "q": "Maps"},
    {"op": "AND", "f": "dct_title_s", "q": "Island"},
    {"op": "NOT", "f": "dct_title_s", "q": "antarctica"}
]

params = {
    'q': '',
    'adv_q': json.dumps(adv_query),
    'page': 1,
    'per_page': 10
}

response = requests.get(f"{BASE_URL}/search", params=params)
data = response.json()

print(f"Total Found: {data.get('meta', {}).get('totalCount')}")

print("\nList of titles:")
for item in data.get('data', []):
    print(f"  - {item['attributes'].get('dct_title_s', 'N/A')}")</code></pre>
                    </div>

                    <div id="tab-response-11" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('json-11')">üìã Copy</button>
                        <pre><code id="json-11" class="json-area language-json">Click "Run" to see the API response...</code></pre>
                    </div>

                    <div id="tab-output-11" class="tab-content" style="position: relative;">
                        <button class="copy-btn" onclick="copyCode('output-11')">üìã Copy</button>
                        <div class="output-area" id="output-11">Click "Run" to see the output...</div>
                    </div>

                    <button class="run-btn" id="run-btn-11">‚ñ∂ Run Example 11</button>
                </div>
            </div>

            <div class="slide">
                <div class="example-block">
                    <div class="example-header">
                        <h3>API Parameters Reference</h3>
                        <span class="badge">Reference</span>
                    </div>
                    <p><strong>Supported Search Parameters</strong></p>
                    <div style="overflow-x: auto;">
                        <table
                            style="width: 100%; border-collapse: collapse; margin-top: 15px; color: #2d3748; font-size: 14px;">
                            <thead>
                                <tr style="background: #2d3748; color: #ffffff; text-align: left;">
                                    <th style="padding: 10px; border: 1px solid #cbd5e0;">Parameter</th>
                                    <th style="padding: 10px; border: 1px solid #cbd5e0;">Type</th>
                                    <th style="padding: 10px; border: 1px solid #cbd5e0;">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>q</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Full‚Äëtext query (default
                                        <code>*:*</code>).
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>adv_q</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">JSON string</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Advanced boolean query logic
                                        (e.g.
                                        <code>[{"op": "AND", "f": "gbl_resourceClass_sm", "q": "Maps"},...]</code>)
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>fq</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">object</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Active facet include filters
                                        (same as <code>include_filters</code>)</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>search_field</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string (CSV)</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Search field
                                        (<code>all_fields</code> [default], etc.)</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>page</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">integer</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Current page of results</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>per_page</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">integer</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Number of results to return
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>sort</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Sort option
                                        (<code>relevance</code>, <code>year_desc</code>, <code>year_asc</code>,
                                        <code>title_asc</code>, <code>title_desc</code>)
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>format</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Format option
                                        (<code>JSON</code> [default], <code>JSONP</code>)</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>callback</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">JSONP callback name</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>fields</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string (CSV)</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">List of fields to return</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>facets</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">string (CSV)</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">List of facets to return</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>include_filters</code>
                                    </td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">object</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Active facet include filters
                                        (same as <code>fq</code>)</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>exclude_filters</code>
                                    </td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">object</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Active facet exclude filters
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;"><code>meta</code></td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">boolean</td>
                                    <td style="padding: 8px; border: 1px solid #cbd5e0;">Include META (default
                                        <code>true</code>)
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button id="prevBtn" onclick="changeSlide(-1)">‚Üê Previous</button>
            <select id="slideSelect" onchange="jumpToSlide(this.value)"
                style="padding: 10px; border-radius: 5px; border: none; background: rgba(255,255,255,0.95); color: #4a5568; font-weight: 600; font-size: 14px; cursor: pointer; max-width: 250px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <!-- Populated by JS -->
            </select>
            <span id="slide-indicator" style="display: none;">Slide 1 of 13</span>
            <button id="nextBtn" onclick="changeSlide(1)">Next ‚Üí</button>
            <button id="fullscreenBtn" onclick="toggleFullscreen()" title="Toggle Fullscreen">‚õ∂</button>
        </div>
    </div>

    <script>
        function copyCode(codeId) {
            const codeElement = document.getElementById(codeId);
            const text = codeElement.textContent;

            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                btn.style.background = '#48bb78';

                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#2d3748';
                }, 2000);
            });
        }

        // Slide navigation
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const slideSelect = document.getElementById('slideSelect');

        // Populate Dropdown
        slides.forEach((slide, index) => {
            let title = `Slide ${index + 1}`;
            const h2 = slide.querySelector('h2');
            const h3 = slide.querySelector('h3');

            if (h3) title = h3.textContent;
            else if (h2) title = h2.textContent;

            // Clean up title
            title = title.replace(/^\d+\.\s*/, ''); // Remove numbering if present to be cleaner
            if (index > 0) title = `${index}. ${title}`; // Add our own numbering for examples

            const option = document.createElement('option');
            option.value = index;
            option.textContent = title;
            slideSelect.appendChild(option);
        });

        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = (n + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');

            // Update controls
            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === slides.length - 1;
            slideSelect.value = currentSlide;

            // Update URL hash
            window.location.hash = 'slide-' + (currentSlide + 1);
        }

        // Initialize state from URL hash
        window.addEventListener('load', () => {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#slide-')) {
                const index = parseInt(hash.replace('#slide-', '')) - 1;
                if (index >= 0 && index < slides.length) {
                    showSlide(index);
                }
            } else {
                showSlide(0);
            }
        });

        function changeSlide(n) {
            const newIndex = currentSlide + n;
            if (newIndex >= 0 && newIndex < slides.length) {
                showSlide(newIndex);
            }
        }

        function jumpToSlide(index) {
            showSlide(parseInt(index));
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
            if (e.key === 'Escape' && document.fullscreenElement) {
                document.exitFullscreen();
            }
        });

        // Fullscreen functionality
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }
        // Tab switching
        function openTab(evt, tabId) {
            // Find the parent example-block to scope the tab switching (optional, but good for safety)
            // But simply: hide all tab-content in the immediate container, remove active from buttons

            // Get the button that was clicked
            var btn = evt.currentTarget;
            var container = btn.closest('.example-block');

            // Hide all tab content in this container
            var tabContents = container.getElementsByClassName("tab-content");
            for (var i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            // Remove active class from all buttons in this container
            var tabBtns = container.getElementsByClassName("tab-btn");
            for (var i = 0; i < tabBtns.length; i++) {
                tabBtns[i].classList.remove("active");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabId).classList.add("active");
            btn.classList.add("active");
        }
    </script>

    <py-config>
        packages = ["requests", "pyodide-http"]
    </py-config>

    <script type="py">
import json
import asyncio
from js import document, window, Prism
import pyodide_http
pyodide_http.patch_all()
import requests

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

def print_to_output(output_id, text, is_html=False):
    """Helper to append text or HTML to output area"""
    output = document.getElementById(output_id)
    new_el = document.createElement("div")
    if is_html:
        new_el.innerHTML = text
    else:
        new_el.innerText = text
    output.appendChild(new_el)

def set_json_content(element_id, data):
    """Helper to set JSON content and highlight it"""
    el = document.getElementById(element_id)
    el.textContent = json.dumps(data, indent=4)
    try:
        Prism.highlightElement(el)
    except Exception:
        pass

def activate_tab(tab_id):
    """Switch to a specific tab programmatically"""
    el = document.getElementById(tab_id)
    if not el: return
    
    container = el.closest('.example-block')
    
    # Remove active class from all content and buttons
    for content in container.getElementsByClassName("tab-content"):
        content.classList.remove("active")
        
    for btn in container.getElementsByClassName("tab-btn"):
        btn.classList.remove("active")
        
    # Activate target tab
    el.classList.add("active")
    
    # Activate target button
    btn_id = f"btn-{tab_id}"
    btn_el = document.getElementById(btn_id)
    if btn_el:
        btn_el.classList.add("active")

def mark_tab_complete(tab_btn_id):
    """Add checkmark to tab button if not already present"""
    btn = document.getElementById(tab_btn_id)
    if btn and "‚úÖ" not in btn.innerText:
        btn.innerText = "‚úÖ " + btn.innerText

def reset_tab_marks(example_num):
    """Reset tab marks for an example"""
    resp_btn = document.getElementById(f"btn-tab-response-{example_num}")
    if resp_btn:
        resp_btn.innerText = "API Response"
    out_btn = document.getElementById(f"btn-tab-output-{example_num}")
    if out_btn:
        out_btn.innerText = "Output"

async def reset_button(btn_id, new_text, original_text, delay=2):
    """Reset button text after delay"""
    await asyncio.sleep(delay)
    btn = document.getElementById(btn_id)
    if btn:
        btn.innerText = original_text

def clear_output(output_id):
    """Clear output area"""
    document.getElementById(output_id).innerHTML = ""

def show_output(output_id):
    """Show output area"""
    # No longer needed to toggle visibility class as tab handles it, 
    # but kept for compatibility with existing CSS usage if any.
    document.getElementById(output_id).classList.add("visible")

def disable_button(btn_id):
    """Disable a button"""
    document.getElementById(btn_id).disabled = True

def enable_button(btn_id):
    """Enable a button"""
    document.getElementById(btn_id).disabled = False

async def example_1(event):
    """Example 1: Simple Search"""
    output_id = "output-1"
    btn_id = "run-btn-1"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 1"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(1)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 1: Text search for 'water'...")
        
        params = {
            'q': 'water',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-1", data)
        mark_tab_complete("btn-tab-response-1")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total number of resources found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-1")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_2(event):
    """Example 2: Obtain a Resource"""
    output_id = "output-2"
    btn_id = "run-btn-2"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 2"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(2)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        resource_id = "ark28722-s7vs38"
        print_to_output(output_id, f"üîÑ Running Example 2: Fetching resource {resource_id}...")
        
        response = requests.get(f"{BASE_URL}/resources/{resource_id}")
        
        if response.status_code == 200:
            data = response.json()
            set_json_content("json-2", data)
            mark_tab_complete("btn-tab-response-2")
            attrs = data['data']['attributes']['ogm']
            
            print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
            print_to_output(output_id, f"Title: {attrs.get('dct_title_s', 'N/A')}")
            print_to_output(output_id, f"Description: {attrs.get('dct_description_sm', ['N/A'])[0]}")
            
            # Show references table
            if 'dct_references_s' in attrs:
                refs = json.loads(attrs['dct_references_s'])
                html_table = "<table style='border-collapse: collapse; width: 100%; margin-top: 10px; color: #d4d4d4; border: 1px solid #4a5568;'>"
                html_table += "<tr style='background: #2d3748;'><th style='text-align: left; padding: 8px; border: 1px solid #4a5568;'>Service</th><th style='text-align: left; padding: 8px; border: 1px solid #4a5568;'>URL</th></tr>"
                for key, value in refs.items():
                    service_name = key.split('#')[-1] if '#' in key else key.split('/')[-1]
                    url_display = value
                    if isinstance(value, dict):
                        url_display = value.get('url', str(value))
                    html_table += f"<tr><td style='padding: 8px; border: 1px solid #4a5568;'>{service_name}</td><td style='padding: 8px; border: 1px solid #4a5568;'><a href='{url_display}' target='_blank' style='color: #63b3ed;'>{str(url_display)[:40]}...</a></td></tr>"
                html_table += "</table>"
                print_to_output(output_id, html_table, is_html=True)
            mark_tab_complete("btn-tab-output-2")
            
            btn.innerText = "‚úÖ Complete!"
        else:
            print_to_output(output_id, f"‚ùå Error: {response.status_code}")
            print_to_output(output_id, response.text)
            btn.innerText = "‚ùå Error"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_3(event):
    """Example 3: Boolean Search"""
    output_id = "output-3"
    btn_id = "run-btn-3"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 3"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(3)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 3: Boolean search for '(water AND ice) NOT Forest'...")
        
        params = {
            'q': '(water AND ice) NOT Forest',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-3", data)
        mark_tab_complete("btn-tab-response-3")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total number of resources found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-3")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_4(event):
    """Example 4: Field-Directed Search"""
    output_id = "output-4"
    btn_id = "run-btn-4"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 4"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(4)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 4: Field-directed search for 'Transportation' in Subject field...")
        
        params = {
            'q': 'Transportation',
            'search_field': 'dct_subject_sm',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-4", data)
        mark_tab_complete("btn-tab-response-4")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total number of resources found: {data.get('meta', {}).get('totalCount')}")
        
        html_list = "<ol>"
        for item in data.get('data', []):
            attrs = item['attributes'].get('ogm', {})
            title = attrs.get('dct_title_s', 'N/A')
            subjects = attrs.get('dct_subject_sm', [])
            subject_str = ", ".join(subjects) if isinstance(subjects, list) else str(subjects)
            html_list += f"<li><strong>{title}</strong><br><small>Subjects: {subject_str}</small></li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles and subjects:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-4")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_5(event):
    """Example 5: Faceted Search"""
    output_id = "output-5"
    btn_id = "run-btn-5"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 5"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(5)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 5: Faceted search for 'seattle' filtered by 'Maps'...")
        
        params = {
            'q': 'seattle',
            'include_filters[gbl_resourceClass_sm][]': 'Maps',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-5", data)
        mark_tab_complete("btn-tab-response-5")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Maps Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-5")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_6(event):
    """Example 6: Faceted Search - With includes"""
    output_id = "output-6"
    btn_id = "run-btn-6"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 6"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(6)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 6: Faceted search (Maps + Washington)...")
        
        params = {
            'q': 'seattle',
            'include_filters[gbl_resourceClass_sm][]': 'Maps',
            'include_filters[dct_spatial_sm][]': 'Washington',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-6", data)
        mark_tab_complete("btn-tab-response-6")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-6")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_7(event):
    """Example 7: Faceted Search - With excludes"""
    output_id = "output-7"
    btn_id = "run-btn-7"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 7"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(7)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 7: Faceted search (Maps + Washington - PSU)...")
        
        params = {
            'q': 'seattle',
            'include_filters[gbl_resourceClass_sm][]': 'Maps',
            'include_filters[dct_spatial_sm][]': 'Washington',
            'exclude_filters[schema_provider_s][]': 'Pennsylvania State University',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-7", data)
        mark_tab_complete("btn-tab-response-7")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-7")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_8(event):
    """Example 8: Spatial Search - Bounding Box"""
    output_id = "output-8"
    btn_id = "run-btn-8"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 8"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(8)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 8: Bounding Box Search (Minnesota)...")
        
        params = {
            'q': 'maps',
            'include_filters[geo][type]': 'bbox',
            'include_filters[geo][field]': 'dcat_bbox',
            'include_filters[geo][top_left][lat]': '49.0',
            'include_filters[geo][top_left][lon]': '-97.2',
            'include_filters[geo][bottom_right][lat]': '43.5',
            'include_filters[geo][bottom_right][lon]': '-89.5',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-8", data)
        mark_tab_complete("btn-tab-response-8")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-8")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_9(event):
    """Example 9: Spatial Search - Distance"""
    output_id = "output-9"
    btn_id = "run-btn-9"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 9"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(9)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 9: Distance Search (50km from Minneapolis)...")
        
        params = {
            'q': 'parks',
            'include_filters[geo][type]': 'distance',
            'include_filters[geo][field]': 'dcat_centroid',
            'include_filters[geo][center][lat]': '44.9778',
            'include_filters[geo][center][lon]': '-93.2650',
            'include_filters[geo][distance]': '50km',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-9", data)
        mark_tab_complete("btn-tab-response-9")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-9")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_10(event):
    """Example 10: Spatial Search - Polygon"""
    output_id = "output-10"
    btn_id = "run-btn-10"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 10"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(10)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 10: Polygon Search (Colorado)...")
        
        params = {
            'q': 'water',
            'include_filters[geo][type]': 'polygon',
            'include_filters[geo][field]': 'locn_geometry',
            'include_filters[geo][relation]': 'intersects',
            'include_filters[geo][points][0][lat]': '41.0',
            'include_filters[geo][points][0][lon]': '-109.0',
            'include_filters[geo][points][1][lat]': '41.0',
            'include_filters[geo][points][1][lon]': '-102.0',
            'include_filters[geo][points][2][lat]': '37.0',
            'include_filters[geo][points][2][lon]': '-102.0',
            'include_filters[geo][points][3][lat]': '37.0',
            'include_filters[geo][points][3][lon]': '-109.0',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-10", data)
        mark_tab_complete("btn-tab-response-10")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-10")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_11(event):
    """Example 11: Advanced Search (adv_q)"""
    output_id = "output-11"
    btn_id = "run-btn-11"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 11"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(11)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 11: Advanced Search (Maps + 'Island' - 'antarctica')...")
        
        # Logic: (ResourceClass=Maps AND Title=Island) NOT Title=Antarctica
        adv_query = [
            {"op": "AND", "f": "gbl_resourceClass_sm", "q": "Maps"},
            {"op": "AND", "f": "dct_title_s", "q": "Island"},
            {"op": "NOT", "f": "dct_title_s", "q": "antarctica"}
        ]
        
        params = {
            'q': '',
            'adv_q': json.dumps(adv_query),
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-11", data)
        mark_tab_complete("btn-tab-response-11")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-11")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

# Bind click events
document.getElementById("run-btn-1").onclick = example_1
document.getElementById("run-btn-2").onclick = example_2
document.getElementById("run-btn-3").onclick = example_3
document.getElementById("run-btn-4").onclick = example_4
document.getElementById("run-btn-5").onclick = example_5
document.getElementById("run-btn-6").onclick = example_6
document.getElementById("run-btn-7").onclick = example_7
document.getElementById("run-btn-8").onclick = example_8
document.getElementById("run-btn-9").onclick = example_9
document.getElementById("run-btn-10").onclick = example_10
document.getElementById("run-btn-11").onclick = example_11

    </script>




<script>





        function copyCode(codeId) {
            const codeElement = document.getElementById(codeId);
            const text = codeElement.textContent;

            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                btn.style.background = '#48bb78';

                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#2d3748';
                }, 2000);
            });
        }

        // Slide navigation
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const slideSelect = document.getElementById('slideSelect');

        // Populate Dropdown
        slides.forEach((slide, index) => {
            let title = `Slide ${index + 1}`;
            const h2 = slide.querySelector('h2');
            const h3 = slide.querySelector('h3');

            if (h3) title = h3.textContent;
            else if (h2) title = h2.textContent;

            // Clean up title
            title = title.replace(/^\d+\.\s*/, ''); // Remove numbering if present to be cleaner
            if (index > 0) title = `${index}. ${title}`; // Add our own numbering for examples

            const option = document.createElement('option');
            option.value = index;
            option.textContent = title;
            slideSelect.appendChild(option);
        });

        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = (n + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');

            // Update controls
            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === slides.length - 1;
            slideSelect.value = currentSlide;

            // Update URL hash
            window.location.hash = 'slide-' + (currentSlide + 1);
        }

        // Initialize state from URL hash
        window.addEventListener('load', () => {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#slide-')) {
                const index = parseInt(hash.replace('#slide-', '')) - 1;
                if (index >= 0 && index < slides.length) {
                    showSlide(index);
                }
            } else {
                showSlide(0);
            }
        });

        function changeSlide(n) {
            const newIndex = currentSlide + n;
            if (newIndex >= 0 && newIndex < slides.length) {
                showSlide(newIndex);
            }
        }

        function jumpToSlide(index) {
            showSlide(parseInt(index));
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
            if (e.key === 'Escape' && document.fullscreenElement) {
                document.exitFullscreen();
            }
        });

        // Fullscreen functionality
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }
        // Tab switching
        function openTab(evt, tabId) {
            // Find the parent example-block to scope the tab switching (optional, but good for safety)
            // But simply: hide all tab-content in the immediate container, remove active from buttons

            // Get the button that was clicked
            var btn = evt.currentTarget;
            var container = btn.closest('.example-block');

            // Hide all tab content in this container
            var tabContents = container.getElementsByClassName("tab-content");
            for (var i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            // Remove active class from all buttons in this container
            var tabBtns = container.getElementsByClassName("tab-btn");
            for (var i = 0; i < tabBtns.length; i++) {
                tabBtns[i].classList.remove("active");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabId).classList.add("active");
            btn.classList.add("active");
        }
    

import json
import asyncio
from js import document, window, Prism
import pyodide_http
pyodide_http.patch_all()
import requests

BASE_URL = "https://lib-btaageoapi-dev-app-01.oit.umn.edu/api/v1"

def print_to_output(output_id, text, is_html=False):
    """Helper to append text or HTML to output area"""
    output = document.getElementById(output_id)
    new_el = document.createElement("div")
    if is_html:
        new_el.innerHTML = text
    else:
        new_el.innerText = text
    output.appendChild(new_el)

def set_json_content(element_id, data):
    """Helper to set JSON content and highlight it"""
    el = document.getElementById(element_id)
    el.textContent = json.dumps(data, indent=4)
    try:
        Prism.highlightElement(el)
    except Exception:
        pass

def activate_tab(tab_id):
    """Switch to a specific tab programmatically"""
    el = document.getElementById(tab_id)
    if not el: return
    
    container = el.closest('.example-block')
    
    # Remove active class from all content and buttons
    for content in container.getElementsByClassName("tab-content"):
        content.classList.remove("active")
        
    for btn in container.getElementsByClassName("tab-btn"):
        btn.classList.remove("active")
        
    # Activate target tab
    el.classList.add("active")
    
    # Activate target button
    btn_id = f"btn-{tab_id}"
    btn_el = document.getElementById(btn_id)
    if btn_el:
        btn_el.classList.add("active")

def mark_tab_complete(tab_btn_id):
    """Add checkmark to tab button if not already present"""
    btn = document.getElementById(tab_btn_id)
    if btn and "‚úÖ" not in btn.innerText:
        btn.innerText = "‚úÖ " + btn.innerText

def reset_tab_marks(example_num):
    """Reset tab marks for an example"""
    resp_btn = document.getElementById(f"btn-tab-response-{example_num}")
    if resp_btn:
        resp_btn.innerText = "API Response"
    out_btn = document.getElementById(f"btn-tab-output-{example_num}")
    if out_btn:
        out_btn.innerText = "Output"

async def reset_button(btn_id, new_text, original_text, delay=2):
    """Reset button text after delay"""
    await asyncio.sleep(delay)
    btn = document.getElementById(btn_id)
    if btn:
        btn.innerText = original_text

def clear_output(output_id):
    """Clear output area"""
    document.getElementById(output_id).innerHTML = ""

def show_output(output_id):
    """Show output area"""
    # No longer needed to toggle visibility class as tab handles it, 
    # but kept for compatibility with existing CSS usage if any.
    document.getElementById(output_id).classList.add("visible")

def disable_button(btn_id):
    """Disable a button"""
    document.getElementById(btn_id).disabled = True

def enable_button(btn_id):
    """Enable a button"""
    document.getElementById(btn_id).disabled = False

async def example_1(event):
    """Example 1: Simple Search"""
    output_id = "output-1"
    btn_id = "run-btn-1"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 1"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(1)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 1: Text search for 'water'...")
        
        params = {
            'q': 'water',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-1", data)
        mark_tab_complete("btn-tab-response-1")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total number of resources found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-1")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_2(event):
    """Example 2: Obtain a Resource"""
    output_id = "output-2"
    btn_id = "run-btn-2"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 2"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(2)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        resource_id = "ark28722-s7vs38"
        print_to_output(output_id, f"üîÑ Running Example 2: Fetching resource {resource_id}...")
        
        response = requests.get(f"{BASE_URL}/resources/{resource_id}")
        
        if response.status_code == 200:
            data = response.json()
            set_json_content("json-2", data)
            mark_tab_complete("btn-tab-response-2")
            attrs = data['data']['attributes']['ogm']
            
            print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
            print_to_output(output_id, f"Title: {attrs.get('dct_title_s', 'N/A')}")
            print_to_output(output_id, f"Description: {attrs.get('dct_description_sm', ['N/A'])[0]}")
            
            # Show references table
            if 'dct_references_s' in attrs:
                refs = json.loads(attrs['dct_references_s'])
                html_table = "<table style='border-collapse: collapse; width: 100%; margin-top: 10px; color: #d4d4d4; border: 1px solid #4a5568;'>"
                html_table += "<tr style='background: #2d3748;'><th style='text-align: left; padding: 8px; border: 1px solid #4a5568;'>Service</th><th style='text-align: left; padding: 8px; border: 1px solid #4a5568;'>URL</th></tr>"
                for key, value in refs.items():
                    service_name = key.split('#')[-1] if '#' in key else key.split('/')[-1]
                    url_display = value
                    if isinstance(value, dict):
                        url_display = value.get('url', str(value))
                    html_table += f"<tr><td style='padding: 8px; border: 1px solid #4a5568;'>{service_name}</td><td style='padding: 8px; border: 1px solid #4a5568;'><a href='{url_display}' target='_blank' style='color: #63b3ed;'>{str(url_display)[:40]}...</a></td></tr>"
                html_table += "</table>"
                print_to_output(output_id, html_table, is_html=True)
            mark_tab_complete("btn-tab-output-2")
            
            btn.innerText = "‚úÖ Complete!"
        else:
            print_to_output(output_id, f"‚ùå Error: {response.status_code}")
            print_to_output(output_id, response.text)
            btn.innerText = "‚ùå Error"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_3(event):
    """Example 3: Boolean Search"""
    output_id = "output-3"
    btn_id = "run-btn-3"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 3"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(3)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 3: Boolean search for '(water AND ice) NOT Forest'...")
        
        params = {
            'q': '(water AND ice) NOT Forest',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-3", data)
        mark_tab_complete("btn-tab-response-3")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total number of resources found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-3")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_4(event):
    """Example 4: Field-Directed Search"""
    output_id = "output-4"
    btn_id = "run-btn-4"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 4"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(4)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 4: Field-directed search for 'Transportation' in Subject field...")
        
        params = {
            'q': 'Transportation',
            'search_field': 'dct_subject_sm',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-4", data)
        mark_tab_complete("btn-tab-response-4")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total number of resources found: {data.get('meta', {}).get('totalCount')}")
        
        html_list = "<ol>"
        for item in data.get('data', []):
            attrs = item['attributes'].get('ogm', {})
            title = attrs.get('dct_title_s', 'N/A')
            subjects = attrs.get('dct_subject_sm', [])
            subject_str = ", ".join(subjects) if isinstance(subjects, list) else str(subjects)
            html_list += f"<li><strong>{title}</strong><br><small>Subjects: {subject_str}</small></li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles and subjects:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-4")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_5(event):
    """Example 5: Faceted Search"""
    output_id = "output-5"
    btn_id = "run-btn-5"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 5"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(5)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 5: Faceted search for 'seattle' filtered by 'Maps'...")
        
        params = {
            'q': 'seattle',
            'include_filters[gbl_resourceClass_sm][]': 'Maps',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-5", data)
        mark_tab_complete("btn-tab-response-5")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Maps Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-5")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_6(event):
    """Example 6: Faceted Search - With includes"""
    output_id = "output-6"
    btn_id = "run-btn-6"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 6"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(6)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 6: Faceted search (Maps + Washington)...")
        
        params = {
            'q': 'seattle',
            'include_filters[gbl_resourceClass_sm][]': 'Maps',
            'include_filters[dct_spatial_sm][]': 'Washington',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-6", data)
        mark_tab_complete("btn-tab-response-6")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-6")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_7(event):
    """Example 7: Faceted Search - With excludes"""
    output_id = "output-7"
    btn_id = "run-btn-7"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 7"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(7)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 7: Faceted search (Maps + Washington - PSU)...")
        
        params = {
            'q': 'seattle',
            'include_filters[gbl_resourceClass_sm][]': 'Maps',
            'include_filters[dct_spatial_sm][]': 'Washington',
            'exclude_filters[schema_provider_s][]': 'Pennsylvania State University',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-7", data)
        mark_tab_complete("btn-tab-response-7")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-7")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_8(event):
    """Example 8: Spatial Search - Bounding Box"""
    output_id = "output-8"
    btn_id = "run-btn-8"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 8"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(8)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 8: Bounding Box Search (Minnesota)...")
        
        params = {
            'q': 'maps',
            'include_filters[geo][type]': 'bbox',
            'include_filters[geo][field]': 'dcat_bbox',
            'include_filters[geo][top_left][lat]': '49.0',
            'include_filters[geo][top_left][lon]': '-97.2',
            'include_filters[geo][bottom_right][lat]': '43.5',
            'include_filters[geo][bottom_right][lon]': '-89.5',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-8", data)
        mark_tab_complete("btn-tab-response-8")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-8")

        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_9(event):
    """Example 9: Spatial Search - Distance"""
    output_id = "output-9"
    btn_id = "run-btn-9"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 9"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(9)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 9: Distance Search (50km from Minneapolis)...")
        
        params = {
            'q': 'parks',
            'include_filters[geo][type]': 'distance',
            'include_filters[geo][field]': 'dcat_centroid',
            'include_filters[geo][center][lat]': '44.9778',
            'include_filters[geo][center][lon]': '-93.2650',
            'include_filters[geo][distance]': '50km',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-9", data)
        mark_tab_complete("btn-tab-response-9")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-9")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_10(event):
    """Example 10: Spatial Search - Polygon"""
    output_id = "output-10"
    btn_id = "run-btn-10"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 10"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(10)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 10: Polygon Search (Colorado)...")
        
        params = {
            'q': 'water',
            'include_filters[geo][type]': 'polygon',
            'include_filters[geo][field]': 'locn_geometry',
            'include_filters[geo][relation]': 'intersects',
            'include_filters[geo][points][0][lat]': '41.0',
            'include_filters[geo][points][0][lon]': '-109.0',
            'include_filters[geo][points][1][lat]': '41.0',
            'include_filters[geo][points][1][lon]': '-102.0',
            'include_filters[geo][points][2][lat]': '37.0',
            'include_filters[geo][points][2][lon]': '-102.0',
            'include_filters[geo][points][3][lat]': '37.0',
            'include_filters[geo][points][3][lon]': '-109.0',
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-10", data)
        mark_tab_complete("btn-tab-response-10")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-10")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))

async def example_11(event):
    """Example 11: Advanced Search (adv_q)"""
    output_id = "output-11"
    btn_id = "run-btn-11"
    btn = document.getElementById(btn_id)
    original_text = "‚ñ∂ Run Example 11"
    
    try:
        disable_button(btn_id)
        reset_tab_marks(11)
        btn.innerText = "‚è≥ Running..."
        await asyncio.sleep(0.1)
        
        clear_output(output_id)
        show_output(output_id)
        print_to_output(output_id, "üîÑ Running Example 11: Advanced Search (Maps + 'Island' - 'antarctica')...")
        
        # Logic: (ResourceClass=Maps AND Title=Island) NOT Title=Antarctica
        adv_query = [
            {"op": "AND", "f": "gbl_resourceClass_sm", "q": "Maps"},
            {"op": "AND", "f": "dct_title_s", "q": "Island"},
            {"op": "NOT", "f": "dct_title_s", "q": "antarctica"}
        ]
        
        params = {
            'q': '',
            'adv_q': json.dumps(adv_query),
            'page': 1,
            'per_page': 10
        }
        
        response = requests.get(f"{BASE_URL}/search", params=params)
        data = response.json()
        set_json_content("json-11", data)
        mark_tab_complete("btn-tab-response-11")
        
        print_to_output(output_id, f"‚úÖ Status: {response.status_code}")
        print_to_output(output_id, f"üìä Total Found: {data.get('meta', {}).get('totalCount')}")
        
        titles = [item['attributes'].get('ogm', {}).get('dct_title_s', 'N/A') for item in data.get('data', [])]
        
        html_list = "<ol>"
        for title in titles:
            html_list += f"<li>{title}</li>"
        html_list += "</ol>"
        
        print_to_output(output_id, "List of titles:")
        print_to_output(output_id, html_list, is_html=True)
        mark_tab_complete("btn-tab-output-11")
        
        btn.innerText = "‚úÖ Complete!"
            
    except Exception as e:
        print_to_output(output_id, f"‚ùå Error: {str(e)}")
        btn.innerText = "‚ùå Error"
    finally:
        enable_button(btn_id)
        asyncio.create_task(reset_button(btn_id, "‚úÖ Complete!", original_text))



    
</script>
